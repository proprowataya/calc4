<!doctypehtml><html lang="en"><meta charset="utf-8"><meta name="viewport"content="width=device-width,initial-scale=1"><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"rel="stylesheet"integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"crossorigin="anonymous"><link rel="manifest"href="try-calc4.webmanifest"><link rel="icon"href="./favicon.ico"><title>Try Calc4</title><style>html{height:100%;-ms-overflow-style:none;scrollbar-width:none}body{height:100%;margin:0;scrollbar-width:none}body::-webkit-scrollbar{display:none}.gutter{background-color:#eee;background-repeat:no-repeat;background-position:50%}.gutter.gutter-vertical{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFAQMAAABo7865AAAABlBMVEVHcEzMzMzyAv2sAAAAAXRSTlMAQObYZgAAABBJREFUeF5jOAMEEAIEEFwAn3kMwcB6I2AAAAAASUVORK5CYII=);cursor:row-resize}.gutter.gutter-horizontal{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==);cursor:col-resize}@media (min-width:768px){.split{display:flex;flex-direction:row}}textarea{width:100%;height:100%;box-sizing:border-box}.editor{height:100%;width:100%}</style><nav id="navbar"class="navbar navbar-expand-md navbar-light bg-light p-0"><div class="container-fluid"><a class="navbar-brand">Try Calc4</a><div class="collapse navbar-collapse"id="navbarSupportedContent"><ul class="navbar-nav me-auto mb-2 mb-md-0"><li class="nav-item"><a class="nav-link active"aria-current="page"href="https://github.com/proprowataya/calc4"target="_blank">About Calc4</a></ul><ul class="navbar-nav mb-2 mb-md-0"style="margin-right:10px"><li class="nav-item dropdown"><a class="nav-link dropdown-toggle"id="sampleCodes"role="button"data-bs-toggle="dropdown"aria-expanded="false">Load sample codes</a><ul class="dropdown-menu"aria-labelledby="sampleCodes"><li><a class="dropdown-item sampleCode-item"id="define-operator"href="#">Define Operators</a><li><a class="dropdown-item sampleCode-item"id="helloworld"href="#">Hello World</a><li><a class="dropdown-item sampleCode-item"id="fib"href="#">Fibonacci Sequence</a><li><a class="dropdown-item sampleCode-item"id="primes"href="#">Print Prime Numbers</a><li><a class="dropdown-item sampleCode-item"id="fizzbuzz"href="#">FizzBuzz</a><li><a class="dropdown-item sampleCode-item"id="Mandelbrot"href="#">Mandelbrot Set</a></ul></ul><div class="form-check form-switch"style="margin-right:10px"><input class="form-check-input"type="checkbox"value=""id="optimizeCheckBox"checked="checked"> <label class="form-check-label"for="optimizeCheckBox">Optimize</label></div><div class="form-check form-switch"style="margin-right:10px"><input class="form-check-input"type="checkbox"value=""id="dumpCheckBox"> <label class="form-check-label"for="dumpCheckBox">Dump code structures</label></div></div><div class="justify-content-end"><button id="execute-or-cancel-button"class="btn btn-primary"type="submit">Execute</button> <button class="navbar-toggler"type="button"data-bs-toggle="collapse"data-bs-target="#navbarSupportedContent"aria-controls="navbarSupportedContent"aria-expanded="false"aria-label="Toggle navigation"style="margin-left:10px"><span class="navbar-toggler-icon"></span></button></div></div></nav><div id="editor"class="split"><div id="input-editor"class="input-editor editor"></div><div id="output-editor"class="output-editor editor"></div></div><footer class="footer"id="footer"><nav class="navbar navbar-light bg-light p-0"><div class="container-fluid"><ul class="navbar-nav me-auto mb-2 mb-md-0"></ul><span class="navbar-text"style="font-size:small">Copyright (c) 2018-2022 Yuya Watari <a href="THIRD-PARTY-NOTICES.txt"target="_blank">(LICENSE)</a></span></div></nav></footer><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/split.js/1.6.0/split.min.js"></script><script src="./node_modules/monaco-editor/min/vs/loader.js"></script><script src="./samplecodes.js"></script><script>"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("./sw.js").then(function(e){console.log("ServiceWorker registration successful with scope: ",e.scope)},function(e){console.log("ServiceWorker registration failed: ",e)})}),window.onload=async function(){require.config({paths:{vs:"node_modules/monaco-editor/min/vs"}});let i,t;function o(e){i.setValue(e),i.setScrollPosition({scrollLeft:0,scrollTop:0})}function c(e){t.setValue(e),t.setScrollPosition({scrollLeft:0,scrollTop:0})}await new Promise((o,e)=>{require(["vs/editor/editor.main"],function(){var e="calc4";monaco.languages.register({id:e}),monaco.languages.setLanguageConfiguration(e,{comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"[",close:"]"},{open:"{",close:"}"},{open:"(",close:")"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"}]}),monaco.languages.setMonarchTokensProvider(e,{tokenizer:{root:[{include:"@whitespace"}],whitespace:[[/[ \t\r\n]+/,""],[/\/\*/,"comment","@comment"],[/\/\/.*\\$/,"comment","@linecomment"],[/\/\/.*$/,"comment"]],comment:[[/[^\/*]+/,"comment"],[/\*\//,"comment","@pop"],[/[\/*]/,"comment"]],linecomment:[[/.*[^\\]$/,"comment","@pop"],[/[^]+/,"comment"]]}}),i=monaco.editor.create(document.getElementById("input-editor"),{language:e,value:getSimpleAdditionCode(),automaticLayout:!0,minimap:{enabled:!1},"bracketPairColorization.enabled":!0}),t=monaco.editor.create(document.getElementById("output-editor"),{automaticLayout:!0,minimap:{enabled:!1},lineNumbers:"off",readOnly:!0}),o()})});let n=null;function m(){var e=document.getElementById("editor").scrollWidth;null!=n&&n.destroy(),n=e<768?(console.log("Changing size of Split.js"),Split(["#input-editor","#output-editor"],{direction:"vertical",gutterSize:20})):(console.log("Changing size of Split.js"),Split(["#input-editor","#output-editor"],{gutterSize:20}))}function l(){var e=window.innerHeight,o=document.getElementById("navbar").scrollHeight,t=document.getElementById("footer").scrollHeight;document.getElementById("editor").style.height=e-o-t+"px"}m(),l(),window.onresize=l,new ResizeObserver(e=>{console.log("Navbar height changed"),l(),m()}).observe(document.getElementById("navbar")),[].slice.call(document.querySelectorAll(".sampleCode-item")).forEach(function(e){e.onclick=function(){switch(e.id){case"define-operator":o(getSimpleAdditionCode());break;case"helloworld":o(getHelloWorldCode());break;case"fib":o(getFibonacciCode());break;case"primes":o(getPrintPrimesCode());break;case"fizzbuzz":o(getFizzBuzzCode());break;case"Mandelbrot":o(getMandelbrotSetCode())}}});let a=null,r=!1,s=!1;function d(){const e=document.getElementById("execute-or-cancel-button");e.onclick=async function(){if(s)console.log("Main - Already started execution");else{await u(),console.log("Main - Start execution"),c("Executing...");var e=i.getValue(),o=document.getElementById("optimizeCheckBox").checked,t=document.getElementById("dumpCheckBox").checked;a.postMessage({source:e,optimize:o,dump:t}),s=!0;{const n=document.getElementById("execute-or-cancel-button");n.onclick=function(){console.log("Main - Cancelling"),s?(a.terminate(),a=null,r=!1,s=!1,console.log("Main - Cancelled"),c("Aborted by user"),d()):console.log("Main - Not in execution")},n.textContent="Stop"}}},e.textContent="Execute"}function u(){return new Promise((t,e)=>{r?t():(a=new Worker("./calc4-runtime.js"),console.log("Main - Start initialization"),a.addEventListener("message",function e(o){console.log("Main - Got message. Worker initialized"),r=!0,a.removeEventListener("message",e),a.addEventListener("message",e=>{console.log("Main - Got a result message");var o=e.data.success;c(e.data.result),s=!1,o||(a.terminate(),a=null,r=!1),d()}),t()}))})}await u(),d()}</script>